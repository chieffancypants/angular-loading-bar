!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("angular")):"function"==typeof define&&define.amd?define(["angular"],t):"object"==typeof exports?exports["angular-loading-bar"]=t(require("angular")):e["angular-loading-bar"]=t(e.angular)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var module=n[r]={i:r,l:!1,exports:{}};return e[r].call(module.exports,module,module.exports,t),module.l=!0,module.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(exports,e,n){t.o(exports,e)||Object.defineProperty(exports,e,{configurable:!1,enumerable:!0,get:n})},t.n=function(module){var e=module&&module.__esModule?function(){return module.default}:function(){return module};return t.d(e,"a",e),e},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=8)}({1:function(module,exports){module.exports=e},8:function(module,exports,e){"use strict";var t=e(1);t.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),t.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),t.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(e){var n=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function(n,r,a,o,i,c){function l(){a.cancel(u),c.complete(),p=0,s=0}function d(n){var a,o=r.get("$http"),i=e.defaults;!n.cache&&!i.cache||n.cache===!1||"GET"!==n.method&&"JSONP"!==n.method||(a=t.isObject(n.cache)?n.cache:t.isObject(i.cache)?i.cache:o);var c=void 0!==a&&void 0!==a.get(n.url);return void 0!==n.cached&&c!==n.cached?n.cached:(n.cached=c,c)}var u,s=0,p=0,f=c.latencyThreshold;return{request:function(e){return e.ignoreLoadingBar||d(e)||(o.$broadcast("cfpLoadingBar:loading",{url:e.url}),0===s&&(u=a(function(){c.start()},f)),s++,c.set(p/s)),e},response:function(e){return e&&e.config?(e.config.ignoreLoadingBar||d(e.config)||(p++,p>=s?(o.$broadcast("cfpLoadingBar:loaded",{url:e.config.url,result:e}),l()):c.set(p/s)),e):(i.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),e)},responseError:function(e){return e&&e.config?(e.config.ignoreLoadingBar||d(e.config)||(p++,p>=s?(o.$broadcast("cfpLoadingBar:loaded",{url:e.config.url,result:e}),l()):c.set(p/s)),n.reject(e)):(i.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),n.reject(e))}}}];e.interceptors.push(n)}]),t.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(e,n,r,a){function o(){if(s||(s=e.get("$animate")),r.cancel(f),!b){var o=n[0],c=o.querySelector?o.querySelector(g):n.find(g)[0];c||(c=o.getElementsByTagName("body")[0]);var l=t.element(c),d=c.lastChild&&t.element(c.lastChild);a.$broadcast("cfpLoadingBar:started"),b=!0,S&&s.enter(h,l,d),$&&s.enter(v,l,h),i(j)}}function i(e){if(b){var t=100*e+"%";m.css("width",t),B=e,y&&(r.cancel(p),p=r(function(){c()},250))}}function c(){if(!(l()>=1)){var e=0,t=l();e=t>=0&&t<.25?(3*Math.random()+3)/100:t>=.25&&t<.65?3*Math.random()/100:t>=.65&&t<.9?2*Math.random()/100:t>=.9&&t<.99?.005:0;i(l()+e)}}function l(){return B}function d(){B=0,b=!1}function u(){s||(s=e.get("$animate")),i(1),r.cancel(f),f=r(function(){var e=s.leave(h,d);e&&e.then&&e.then(d),s.leave(v),a.$broadcast("cfpLoadingBar:completed")},500)}var s,p,f,g=this.parentSelector,h=t.element(this.loadingBarTemplate),m=h.find("div").eq(0),v=t.element(this.spinnerTemplate),b=!1,B=0,y=this.autoIncrement,$=this.includeSpinner,S=this.includeBar,j=this.startSize;return{start:o,set:i,status:l,inc:c,complete:u,autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]}),module.exports="angular-loading-bar"}})});
//# sourceMappingURL=loading-bar.js.map