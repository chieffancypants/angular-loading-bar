/*! 
 * angular-loading-bar v0.9.0
 * https://chieffancypants.github.io/angular-loading-bar
 * Copyright (c) 2016 Wes Cruver
 * License: MIT
 */
!function(a){"use strict";a.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),a.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),a.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(b){var c=["$q","$cacheFactory","$timeout","$rootScope","$log","cfpLoadingBar",function(c,d,e,f,g,h){function i(){e.cancel(k),h.complete(),m=0,l=0}function j(c){var e,f=d.get("$http"),g=b.defaults;!c.cache&&!g.cache||c.cache===!1||"GET"!==c.method&&"JSONP"!==c.method||(e=a.isObject(c.cache)?c.cache:a.isObject(g.cache)?g.cache:f);var h=void 0!==e?void 0!==e.get(c.url):!1;return void 0!==c.cached&&h!==c.cached?c.cached:(c.cached=h,h)}var k,l=0,m=0,n=h.latencyThreshold;return{request:function(a){return a.ignoreLoadingBar||j(a)||(f.$broadcast("cfpLoadingBar:loading",{url:a.url}),0===l&&(k=e(function(){h.start()},n)),l++,h.set(m/l)),a},response:function(a){return a&&a.config?(a.config.ignoreLoadingBar||j(a.config)||(m++,m>=l?(f.$broadcast("cfpLoadingBar:loaded",{url:a.config.url,result:a}),i()):h.set(m/l)),a):(g.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),a)},responseError:function(a){return a&&a.config?(a.config.ignoreLoadingBar||j(a.config)||(m++,m>=l?(f.$broadcast("cfpLoadingBar:loaded",{url:a.config.url,result:a}),i()):h.set(m/l)),c.reject(a)):(g.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),c.reject(a))}}}];b.interceptors.push(c)}]),a.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(b,c,d,e){function f(){if(l||(l=b.get("$animate")),d.cancel(n),!s){var f=c[0],h=f.querySelector?f.querySelector(o):c.find(o)[0];h||(h=f.getElementsByTagName("body")[0]);var i=a.element(h),j=h.lastChild&&a.element(h.lastChild);e.$broadcast("cfpLoadingBar:started"),s=!0,w&&l.enter(p,i,j),v&&l.enter(r,i,p),g(x)}}function g(a){if(s){var b=100*a+"%";q.css("width",b),t=a,u&&(d.cancel(m),m=d(function(){h()},250))}}function h(){if(!(i()>=1)){var a=0,b=i();a=b>=0&&.25>b?(3*Math.random()+3)/100:b>=.25&&.65>b?3*Math.random()/100:b>=.65&&.9>b?2*Math.random()/100:b>=.9&&.99>b?.005:0;var c=i()+a;g(c)}}function i(){return t}function j(){t=0,s=!1}function k(){l||(l=b.get("$animate")),g(1),d.cancel(n),n=d(function(){var a=l.leave(p,j);a&&a.then&&a.then(j),l.leave(r),e.$broadcast("cfpLoadingBar:completed")},500)}var l,m,n,o=this.parentSelector,p=a.element(this.loadingBarTemplate),q=p.find("div").eq(0),r=a.element(this.spinnerTemplate),s=!1,t=0,u=this.autoIncrement,v=this.includeSpinner,w=this.includeBar,x=this.startSize;return{start:f,set:g,status:i,inc:h,complete:k,autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}(window.angular);