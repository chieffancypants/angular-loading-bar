/*! 
 * angular-loading-bar v0.9.0
 * https://chieffancypants.github.io/angular-loading-bar
 * Copyright (c) 2017 Wes Cruver
 * License: MIT
 */

!function(){"use strict";angular.module("angular-loading-bar",["cfp.loadingBarInterceptor"]),angular.module("chieffancypants.loadingBar",["cfp.loadingBarInterceptor"]),angular.module("cfp.loadingBarInterceptor",["cfp.loadingBar"]).config(["$httpProvider",function(e){var n=["$q","$cacheFactory","$log","cfpLoadingBar",function(n,t,a,r){function i(n){var a,r=t.get("$http"),i=e.defaults;!n.cache&&!i.cache||!1===n.cache||"GET"!==n.method&&"JSONP"!==n.method||(a=angular.isObject(n.cache)?n.cache:angular.isObject(i.cache)?i.cache:r);var c=void 0!==a&&void 0!==a.get(n.url);return void 0!==n.cached&&c!==n.cached?n.cached:(n.cached=c,c)}return{request:function(e){return e.ignoreLoadingBar||i(e)||r.push({url:e.url}),e},response:function(e){return e&&e.config?(e.config.ignoreLoadingBar||i(e.config)||r.pop({url:e.config.url,result:e}),e):(a.error("Broken interceptor detected: Config object not supplied in response:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),e)},responseError:function(e){return e&&e.config?(e.config.ignoreLoadingBar||i(e.config)||r.pop({url:e.config.url,result:e}),n.reject(e)):(a.error("Broken interceptor detected: Config object not supplied in rejection:\n https://github.com/chieffancypants/angular-loading-bar/pull/50"),n.reject(e))}}}];e.interceptors.push(n)}]),angular.module("cfp.loadingBar",[]).provider("cfpLoadingBar",function(){this.autoIncrement=!0,this.includeSpinner=!0,this.includeBar=!0,this.latencyThreshold=100,this.startSize=.02,this.parentSelector="body",this.spinnerTemplate='<div id="loading-bar-spinner"><div class="spinner-icon"></div></div>',this.loadingBarTemplate='<div id="loading-bar"><div class="bar"><div class="peg"></div></div></div>',this.$get=["$injector","$document","$timeout","$rootScope",function(e,n,t,a){function r(){t.cancel(m),u(),z=0,q=0}function i(){if(p||(p=e.get("$animate")),t.cancel(f),!$){var r=n[0],i=r.querySelector?r.querySelector(v):n.find(v)[0];i||(i=r.getElementsByTagName("body")[0]);var o=angular.element(i),l=i.lastChild&&angular.element(i.lastChild);a.$broadcast("cfpLoadingBar:started"),$=!0,j&&p.enter(B,o,l),L&&p.enter(S,o,B),c(I)}}function c(e){if($){var n=100*e+"%";b.css("width",n),y=e,T&&(t.cancel(g),g=t(function(){o()},250))}}function o(){if(!(l()>=1)){var e=0,n=l();e=n>=0&&n<.25?(3*Math.random()+3)/100:n>=.25&&n<.65?3*Math.random()/100:n>=.65&&n<.9?2*Math.random()/100:n>=.9&&n<.99?.005:0,c(l()+e)}}function l(){return y}function d(){y=0,$=!1}function u(){p||(p=e.get("$animate")),c(1),t.cancel(f),f=t(function(){var e=p.leave(B,d);e&&e.then&&e.then(d),p.leave(S),a.$broadcast("cfpLoadingBar:completed")},500)}function s(e){a.$broadcast("cfpLoadingBar:loading",e),0===q&&(m=t(function(){i()},C)),c(z/++q)}function h(e){++z>=q?(a.$broadcast("cfpLoadingBar:loaded",e),r()):c(z/q)}var p,g,f,m,v=this.parentSelector,B=angular.element(this.loadingBarTemplate),b=B.find("div").eq(0),S=angular.element(this.spinnerTemplate),$=!1,y=0,T=this.autoIncrement,L=this.includeSpinner,j=this.includeBar,I=this.startSize,q=0,z=0,C=this.latencyThreshold;return{start:i,set:c,status:l,inc:o,complete:u,push:s,pop:h,autoIncrement:this.autoIncrement,includeSpinner:this.includeSpinner,latencyThreshold:this.latencyThreshold,parentSelector:this.parentSelector,startSize:this.startSize}}]})}();